# 自然言語マクロ実行可能性検証システム

**概要**: 自然言語マクロが AIエージェントとして実際に実行可能かを事前判定する静的検証システム。物理的不可能性、ツール不在、論理矛盾、曖昧性を検出する。

---

## 初期化

全ての変数をクリアしてください

{{target_macro}}に空文字列を保存してください
{{feasibility_result}}に空文字列を保存してください
{{can_execute}}にfalseを保存してください

「=== 自然言語マクロ実行可能性検証システム開始 ===」と表示してください

## フェーズ1: 検証対象マクロの入力

**指示**: 以下のテストケース1を選んで{{target_macro}}に保存してください

### テストケース1: 
{{target_macro}}に「りんごを食べてください。その後、月まで飛んで月の石を持ち帰ってください。」を保存してください

### テストケース2: 
{{target_macro}}に「私の家のプリンターで資料を印刷してください。印刷後、物理的にその紙を私に手渡ししてください。」を保存してください

### テストケース3: 
{{target_macro}}に「いい感じにしてください。よろしくお願いします。適当にお任せします。」を保存してください

### テストケース4: 
{{target_macro}}に「ファイルtest.txtを完全に削除してください。削除後、そのファイルtest.txtの内容を表示してください。」を保存してください

### テストケース5: 
{{target_macro}}に「{{user_name}}と{{project_name}}を使用して、プロジェクト進捗レポートを{{report_content}}に生成してください。完成したら{{report_content}}を表示してください。」を保存してください

## フェーズ2: LLMによる実行可能性分析

{{target_macro}}の内容を取得してください

取得したマクロ内容に対して、以下の分析を実行してください：

### 分析タスク

**あなたは自然言語マクロ実行可能性の専門分析者です。以下のマクロをAIエージェントの観点から分析し、実際に実行可能かを評価してください：**

**マクロ内容**: 上記で取得した{{target_macro}}の内容

**分析項目**：
1. **物理的実行可能性**: AIエージェントが物理世界で実行できるか
2. **ツール・リソース要件**: 実行に必要なツールやリソースがAI環境で利用可能か
3. **論理的整合性**: 指示の手順に論理的矛盾がないか
4. **具体性・明確性**: 実行に十分な具体性と明確性があるか

**重要制約**: 
- AIエージェントの能力限界を考慮する（物理的行動不可、特定ツールの制限等）
- Claude Codeの利用可能ツール範囲を想定する（ファイル操作、Web検索、計算等）
- 現実的な実行環境を前提とする

### 判定基準

以下の基準で最終判定を行ってください：

- **実行可能 (FEASIBLE)**: AIエージェントが現実的に実行できる指示
- **実行不能 (INFEASIBLE)**: 物理的制約、ツール制限、論理矛盾等により実行不可能

### 結果保存

分析結果を以下の形式で{{feasibility_result}}に保存してください：

```
判定: [FEASIBLE または INFEASIBLE]
理由: [実行可能性の根拠または不可能な理由]
検出された問題: [問題がある場合の詳細分類]
推奨対応: [実行可能にするための具体的提案]
```

判定がFEASIBLEの場合は{{can_execute}}にtrueを保存してください
判定がINFEASIBLEの場合は{{can_execute}}にfalseを保存してください

## フェーズ3: 実行可否判定

{{can_execute}}の値を確認し、結果に応じて以下を実行してください：

**{{can_execute}}がtrueの場合**：
- 「✅ 検証完了: マクロは実行可能です。実行を許可します。」を表示
- {{feasibility_result}}の内容を表示

**{{can_execute}}がfalseの場合**：
- 「⚠️ 実行可能性エラー: 実行不能な指示が検出されました。実行を停止します。」を表示  
- {{feasibility_result}}の内容を表示
- 「指示を修正後に再度検証を実行してください。」を表示

## 検証結果レポート

「=== 自然言語マクロ実行可能性検証レポート ===」として以下を表示：

1. 検証対象マクロの内容
2. 詳細な実行可能性分析結果
3. 最終判定とその根拠
4. 推奨される対応策（問題がある場合）