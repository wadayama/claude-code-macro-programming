# コンテンツ処理システム（Conditional Execution - 中級）

- `##` マークダウン見出し：順次実行するメインタスク
- `###` マークダウン見出し：Task toolを利用して並列実行されるサブタスク
- 条件分岐: 自然言語による条件指示（「...の場合は」「...に応じて」など）
- `{{variable_name}}`：結果参照
- 結果保存：「...を{{variable_name}}に保存してください」
- 永続化保存：「{{variable_name}}をfilename.jsonに保存して永続化してください」
- ファイル読み込み：「filename.jsonを読み込んで{{variable_name}}に設定してください」
- 外部モジュール実行：「filename.mdの実行をしてください」
- ツール使用：自然言語で指示（例：「Webで調べて」「ファイルを読んで」）
---

## ファイル情報取得
README.mdファイルの基本情報（ファイル形式、文字数、言語）を確認し{{file_info}}に保存してください。

## 処理方式決定・実行
{{file_info}}の内容に基づいて以下の条件分岐を実行：

### サイズ別処理
文字数が50文字未満の場合：
→ 「簡潔なファイル」として全文をそのまま{{content_summary}}に保存
→ 
文字数が50-500文字の場合：
→ 「標準的なファイル」として重要ポイントを抽出し{{content_summary}}に保存
→ 
文字数が500文字以上の場合：
→ 「詳細なファイル」として要約を作成し{{content_summary}}に保存
→ 
## 言語対応処理
{{file_info}}の言語情報に応じて以下を実行：

日本語の場合：
→ 日本語での詳細分析を実行し{{language_analysis}}に保存

英語の場合：
→ 英語での分析後、日本語訳要約を{{language_analysis}}に保存

その他言語の場合：
→ 言語を特定し、日本語での概要説明を{{language_analysis}}に保存

## 出力形式最適化
{{content_summary}}と{{language_analysis}}を組み合わせ、
ファイルサイズと言語に最適化された最終レポートを作成し、
処理結果をcontent_analysis.jsonに保存して永続化してください。

## エラーハンドリング
ファイル読み取りに問題がある場合：
→ 「ファイル処理で問題が発生しました。利用可能な情報で基本分析を実行します」
→ 可能な範囲での分析結果を提供してください

---

**学習ポイント**:
- 複数の条件（サイズ・言語）の組み合わせ処理
- 同一タスク内での段階的条件分岐
- エラーハンドリングを含む堅牢な設計
- ファイル永続化による処理結果の保存
- 実際のファイルを使用した実践的な条件分岐
- より複雑なConditional Executionパターン